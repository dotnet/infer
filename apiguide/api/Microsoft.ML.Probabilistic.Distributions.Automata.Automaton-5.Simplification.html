<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Simplification
   | Infer.NET API Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Simplification
   | Infer.NET API Guide ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/infernet.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification">
  
  
  <h1 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification" class="text-break">Class Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Simplification
  </h1>
  <div class="markdown level0 summary"><p>Helper class which which implements automaton simplification.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object">Object</a></div>
    <div class="level1"><span class="xref">Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Simplification</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.equals#System_Object_Equals_System_Object_">Object.Equals(Object)</a>
    </div>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.equals#System_Object_Equals_System_Object_System_Object_">Object.Equals(Object, Object)</a>
    </div>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.gethashcode#System_Object_GetHashCode">Object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.gettype#System_Object_GetType">Object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.memberwiseclone#System_Object_MemberwiseClone">Object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.referenceequals#System_Object_ReferenceEquals_System_Object_System_Object_">Object.ReferenceEquals(Object, Object)</a>
    </div>
    <div>
      <a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object.tostring#System_Object_ToString">Object.ToString()</a>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Microsoft.ML.Probabilistic.Distributions.Automata.html">Microsoft.ML.Probabilistic.Distributions.Automata</a></h6>
  <h6><strong>Assembly</strong>: Microsoft.ML.Probabilistic.dll</h6>
  <h5 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class Simplification</code></pre>
  </div>
  <h3 id="constructors">Constructors
  </h3>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification__ctor_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.#ctor*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification__ctor_Microsoft_ML_Probabilistic_Distributions_Automata_Automaton__0__1__2__3__4__Builder_System_Nullable_System_Double__" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.#ctor(Microsoft.ML.Probabilistic.Distributions.Automata.Automaton{`0,`1,`2,`3,`4}.Builder,System.Nullable{System.Double})">Simplification(Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Builder, Nullable&lt;Double&gt;)</h4>
  <div class="markdown level1 summary"><p>Initializes new instance of <a class="xref" href="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton-5.Simplification.html">Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Simplification</a> class.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Simplification(Automaton&lt;TSequence, TElement, TElementDistribution, TSequenceManipulator, TThis&gt;.Builder builder, double? pruneStatesWithLogEndWeightLessThan)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton-5.Builder.html">Automaton.Builder</a>&lt;&gt;</td>
        <td><span class="parametername">builder</span></td>
        <td></td>
      </tr>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.nullable-1">Nullable</a>&lt;<a class="xref" href="https://docs.microsoft.com/dotnet/api/system.double">Double</a>&gt;</td>
        <td><span class="parametername">pruneStatesWithLogEndWeightLessThan</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_MergeParallelTransitions_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.MergeParallelTransitions*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_MergeParallelTransitions" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.MergeParallelTransitions">MergeParallelTransitions()</h4>
  <div class="markdown level1 summary"><p>Merges outgoing transitions with the same destination state.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void MergeParallelTransitions()</code></pre>
  </div>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_MergeTrees_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.MergeTrees*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_MergeTrees" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.MergeTrees">MergeTrees()</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void MergeTrees()</code></pre>
  </div>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_RemoveDeadStates_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.RemoveDeadStates*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_RemoveDeadStates" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.RemoveDeadStates">RemoveDeadStates()</h4>
  <div class="markdown level1 summary"><p>Optimizes the automaton by removing all states which can't reach end states.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool RemoveDeadStates()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.boolean">Boolean</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_RemoveLowWeightEndStates_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.RemoveLowWeightEndStates*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_RemoveLowWeightEndStates" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.RemoveLowWeightEndStates">RemoveLowWeightEndStates()</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void RemoveLowWeightEndStates()</code></pre>
  </div>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_Simplify_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.Simplify*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_Simplify" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.Simplify">Simplify()</h4>
  <div class="markdown level1 summary"><p>Attempts to simplify the structure of the automaton, reducing the number of states and transitions.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool Simplify()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.boolean">Boolean</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_Simplify_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Only generalized tree part of automaton is simplified. Generalized tree is a tree with self-loops
allowed. Any non-trivial loops (consisting of more than 1 state) are left untouched.</p>
<p>The simplification procedure works as follows:</p>
<ul>
<li><p>If a pair of states has more than one transition between them, the transitions get merged.</p>
</li>
<li><p>A part of the automaton that is a tree is found.
For example in this automaton:
a---&gt;b---&gt;c---&gt;d---<br>
v              ^   |
e---&gt;f---&gt;g     --/
|<br>
v
h---&gt;i---&gt;j--&gt;k
^    |
--/
Nodes &quot;a&quot; to &quot;h&quot; form the tree. Nodes &quot;i&quot; to &quot;k&quot; are not part of the tree.
Note 1: h has child nodes which form loop (i, j) but is still considered a part of tree.
Because path leading to it from root has no loops.
Note 2: d is also considered to be a part of tree. Self-loops are allowed.</p>
</li>
<li><p>After that, states in the tree part of automaton are recursively merged if they are compatible.
Two states are considered compatible if path from root to them has exactly same element
distributions and groups on transitions, and they have compatible self-loops. Weights in
transitions from root can be different - weights will be adjusted as necessary.
For example if in previous automaton transitions (a-b) and (a-e) have the same
element distribution then result will look like this:</p>
<pre><code>a---&gt;b---&gt;c---&gt;d---\
| \            ^   |
</code></pre>
</li>
</ul>
<p>e    |   f---&gt;g      --/
|<br>
v
h---&gt;i---&gt;j--&gt;k
^    |
--/</p>
<ul>
<li>If pruneStatesWithLogEndWeightLessThan is not null then log normalizer and graph
condensation computed. All states which do not have high enough end probability are deleted</li>
</ul>
</div>
  <a id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_SimplifyIfNeeded_" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.SimplifyIfNeeded*"></a>
  <h4 id="Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_SimplifyIfNeeded" data-uid="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton`5.Simplification.SimplifyIfNeeded">SimplifyIfNeeded()</h4>
  <div class="markdown level1 summary"><p>Attempts to simplify the automaton using <a class="xref" href="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton-5.Simplification.html#Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_Simplification_Simplify">Simplify()</a> if the number of states
exceeds <a class="xref" href="Microsoft.ML.Probabilistic.Distributions.Automata.Automaton-5.html#Microsoft_ML_Probabilistic_Distributions_Automata_Automaton_5_MaxStateCountBeforeSimplification">MaxStateCountBeforeSimplification</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool SimplifyIfNeeded()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.boolean">Boolean</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © .NET Foundation. All rights reserved.</span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
